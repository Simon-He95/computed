var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var B=E(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.parseMultiDataPaths=re,j.getDataOnPath=void 0;var V=/^\s/,m=function(e,t){throw new Error('Parsing data path "'+e+'" failed at char "'+e[t]+'" (index '+t+")")},Q=function(e,t){for(var r=t.index;t.index<t.length;){var i=e[t.index];if(/^[0-9]/.test(i)){t.index++;continue}break}return r===t.index&&m(e,t.index),parseInt(e.slice(r,t.index),10)},N=function(e,t){var r=t.index,i=e[r];if(/^[_a-zA-Z$]/.test(i))for(t.index++;t.index<t.length;){var f=e[t.index];if(/^[_a-zA-Z0-9$]/.test(f)){t.index++;continue}break}else m(e,t.index);return e.slice(r,t.index)},$=function(e,t){for(var r=[N(e,t)],i={deepCmp:!1};t.index<t.length;){var f=e[t.index];if(f==="[")t.index++,r.push(Q(e,t)),e[t.index]!=="]"&&m(e,t.index),t.index++;else if(f==="."){if(t.index++,e[t.index]==="*"){if(t.index++,e[t.index]==="*"){t.index++,i.deepCmp=!0;break}m(e,t.index)}r.push(N(e,t))}else break}return{path:r,options:i}},ee=function(e,t){for(;V.test(e[t.index]);)t.index++;for(var r=[$(e,t)],i=!1;t.index<t.length;){var f=e[t.index];V.test(f)?t.index++:f===","?(i=!0,t.index++):i?(i=!1,r.push($(e,t))):m(e,t.index)}return r},te=function(e,t){t.index<t.length&&m(e,t.index)};function re(e){var t={length:e.length,index:0},r=ee(e,t);return te(e,t),r}var ne=function(e,t){var r=e;return t.forEach(function(i){r=typeof r!="object"||r===null?void 0:r[i]}),r};j.getDataOnPath=ne});var J=E((Pe,z)=>{z.exports=function(){let t=null,r;function i(n){return n?typeof n=="object"||typeof n=="function":!1}function f(n){if(n!==null&&!i(n))throw new TypeError("Object prototype may only be an Object or null: "+n)}let a=Object,l=Boolean(a.create)||!({__proto__:null}instanceof a),c=a.create||(l?function(o){return f(o),{__proto__:o}}:function(o){if(f(o),o===null)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var v=function(){};return v.prototype=o,new v}),d=function(){return null},b=a.getPrototypeOf||([].__proto__===Array.prototype?function(o){let v=o.__proto__;return i(v)?v:null}:d);return r=function(n,o){if((this&&this instanceof r?this.constructor:void 0)===void 0)throw new TypeError("Constructor Proxy requires 'new'");if(!i(n)||!i(o))throw new TypeError("Cannot create proxy with a non-object as target or handler");let y=function(){};t=function(){n=null,y=function(u){throw new TypeError(`Cannot perform '${u}' on a proxy that has been revoked`)}},setTimeout(function(){t=null},0);let h=o;o={get:null,set:null,apply:null,construct:null};for(let u in h){if(!(u in o))throw new TypeError(`Proxy polyfill does not support trap '${u}'`);o[u]=h[u]}typeof h=="function"&&(o.apply=h.apply.bind(h));let p=b(n),s,x=!1,O=!1;typeof n=="function"?(s=function(){let _=this&&this.constructor===s,P=Array.prototype.slice.call(arguments);if(y(_?"construct":"apply"),_&&o.construct)return o.construct.call(this,n,P);if(!_&&o.apply)return o.apply(n,this,P);if(_){P.unshift(n);let T=n.bind.apply(n,P);return new T}return n.apply(this,P)},x=!0):n instanceof Array?(s=[],O=!0):s=l||p!==null?c(p):{};let C=o.get?function(u){return y("get"),o.get(this,u,s)}:function(u){return y("get"),this[u]},q=o.set?function(u,_){y("set");let P=o.set(this,u,_,s)}:function(u,_){y("set"),this[u]=_},D=a.getOwnPropertyNames(n),A={};D.forEach(function(u){if((x||O)&&u in s)return;let _=a.getOwnPropertyDescriptor(n,u),P={enumerable:Boolean(_.enumerable),get:C.bind(n,u),set:q.bind(n,u)};a.defineProperty(s,u,P),A[u]=!0});let M=!0;if(x||O){let u=a.setPrototypeOf||([].__proto__===Array.prototype?function(P,T){return f(T),P.__proto__=T,P}:d);p&&u(s,p)||(M=!1)}if(o.get||!M)for(let u in n)A[u]||a.defineProperty(s,u,{get:C.bind(n,u)});return a.seal(n),a.seal(s),s},r.revocable=function(n,o){return{proxy:new r(n,o),revoke:t}},r}});var Z=E(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.create=ue,k.unwrap=ce;var oe=ie(J());function ie(e){return e&&e.__esModule?e:{default:e}}var ae=oe.default(),H=function(e,t,r){if(typeof e!="object"||e===null)return e;var i,f={get:function(a,l){if(l==="__rawObject__")return e;var c=r.concat(l),d=e[l];return t.push({path:c,value:d}),H(d,t,c)}};try{i=new Proxy(e,f)}catch(a){i=new ae(e,f)}return i};function ue(e,t){return H(e,t,[])}function ce(e){return typeof e!="object"||e===null||typeof e.__rawObject__!="object"?e:e.__rawObject__}});var S=E(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),W.behavior=void 0;var G,se=L(require("rfdc")),pe=L(require("fast-deep-equal")),g=U(B()),I=U(Z());function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return e&&e.__esModule?e:{default:e}}function U(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}}return t.default=e,t}var X=se.default({proto:!0}),fe=0,le=Behavior({lifetimes:{attached:function(){this.setData({_computedWatchInit:"attached"})},created:function(){this.setData({_computedWatchInit:"created"})}},definitionFilter:function(e){var t=e.computed,r=e.watch,i=[],f=fe++;i.push({fields:"_computedWatchInit",observer:function(){var a=this.data._computedWatchInit;if(a==="created"){var l={computedUpdaters:[],computedRelatedPathValues:{},watchCurVal:{},_triggerFromComputedAttached:{}};this._computedWatchInfo||(this._computedWatchInfo={}),this._computedWatchInfo[f]=l,r&&Object.keys(r).forEach(function(d){var b=g.parseMultiDataPaths(d).map(function(n){var o=n.path,v=n.options,y=g.getDataOnPath(this.data,o);return v.deepCmp?X(y):y}.bind(this));l.watchCurVal[d]=b}.bind(this))}else if(a==="attached"){var c=this._computedWatchInfo[f];t&&Object.keys(t).forEach(function(d){var b=t[d],n=[],o=b(I.create(this.data,n)),v=n.map(function(h){var p=h.path;return{path:p,value:JSON.stringify(g.getDataOnPath(this.data,p))}}.bind(this));this.setData(K({},d,I.unwrap(o))),c._triggerFromComputedAttached[d]=!0,c.computedRelatedPathValues[d]=v;var y=function(){for(var h=c.computedRelatedPathValues[d],p=!1,s=0;s<h.length;s++){var x=h[s],O=x.path,C=x.value,q=g.getDataOnPath(this.data,O);if(C!==JSON.stringify(q)){p=!0;break}}if(!p)return!1;var D=[],A=b(I.create(this.data,D)),M=D.map(function(u){var _=u.path;return{path:_,value:JSON.stringify(g.getDataOnPath(this.data,_))}}.bind(this));return this.setData(K({},d,I.unwrap(A))),c.computedRelatedPathValues[d]=M,!0}.bind(this);c.computedUpdaters.push(y)}.bind(this))}}}),t&&i.push({fields:"**",observer:function(){if(this._computedWatchInfo){var a,l=this._computedWatchInfo[f];if(l)do a=l.computedUpdaters.some(function(c){return c.call(this)}.bind(this));while(a)}}}),r&&Object.keys(r).forEach(function(a){var l=g.parseMultiDataPaths(a);i.push({fields:a,observer:function(){if(this._computedWatchInfo){var c=this._computedWatchInfo[f];if(c){if(Object.keys(c._triggerFromComputedAttached).length){var d={};for(var b in l.forEach(function(p){return d[p.path[0]]=!0}),c._triggerFromComputedAttached)if(Object.prototype.hasOwnProperty.call(c._triggerFromComputedAttached,b)&&d[b]&&c._triggerFromComputedAttached[b])return void(c._triggerFromComputedAttached[b]=!1)}var n=c.watchCurVal[a],o=l.map(function(p){var s=p.path,x=p.options;return{val:g.getDataOnPath(this.data,s),options:x}}.bind(this)),v=o.map(function(p){var s=p.val;return p.options.deepCmp?X(s):s});c.watchCurVal[a]=v;for(var y=!1,h=0;h<v.length;h++)if(l[h].options.deepCmp?!pe.default(n[h],v[h]):n[h]!==v[h]){y=!0;break}y&&r[a].apply(this,o.map(function(p){return p.val}))}}}})}),typeof e.observers!="object"&&(e.observers={}),Array.isArray(e.observers)?(G=e.observers).push.apply(G,i):i.forEach(function(a){var l=e.observers[a.fields];l?e.observers[a.fields]=function(){a.observer.call(this),l.call(this)}:e.observers[a.fields]=a.observer})}});W.behavior=le});"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"behavior",{enumerable:!0,get:function(){return F.behavior}}),exports.ComponentWithComputed=de,exports.BehaviorWithComputed=he,exports.DataTracerMode=exports.setCurrentDataTracerMode=exports.getCurrentDataTracerMode=void 0;var w,R,F=S();function de(e){return Array.isArray(e.behaviors)||(e.behaviors=[]),e.behaviors.unshift(F.behavior),Component(e)}function he(e){return Array.isArray(e.behaviors)||(e.behaviors=[]),e.behaviors.unshift(F.behavior),Behavior(e)}exports.DataTracerMode=R,(w=R||(exports.DataTracerMode=R={}))[w.Auto=0]="Auto",w[w.Proxy=1]="Proxy",w[w.DefineProperty=2]="DefineProperty";var Y=R.Auto,ve=function(){return Y};exports.getCurrentDataTracerMode=ve;var ye=function(e){Y=e};exports.setCurrentDataTracerMode=ye;
